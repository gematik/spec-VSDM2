{
  "resourceType": "StructureDefinition",
  "id": "VSDMOperationOutcome",
  "url": "https://gematik.de/fhir/vsdm2/StructureDefinition/VSDMOperationOutcome",
  "version": "1.0.0",
  "name": "VSDMOperationOutcome",
  "title": "Fehlermeldung des VSDM Resource Servers",
  "status": "draft",
  "experimental": false,
  "date": "2023-12-31",
  "publisher": "gematik GmbH",
  "description": "Strukturierte Fehlermeldung im Versichertenstammdatenmanagement (VSDM) 2.0",
  "fhirVersion": "4.0.1",
  "kind": "resource",
  "abstract": false,
  "type": "OperationOutcome",
  "baseDefinition": "http://hl7.org/fhir/StructureDefinition/OperationOutcome",
  "derivation": "constraint",
  "differential": {
    "element": [
      {
        "id": "OperationOutcome",
        "path": "OperationOutcome",
        "short": "Fehlermeldung des VSDM Resource Servers",
        "definition": "Strukturierte Fehlermeldung im Versichertenstammdatenmanagement (VSDM) 2.0"
      },
      {
        "id": "OperationOutcome.text",
        "path": "OperationOutcome.text",
        "short": "Fehlerbeschreibung zur Anzeige",
        "definition": "Dieser Beschreibungstext wird vom Clientsystem zur Anzeige gebracht, wenn keine anderweitige Fehlerbehandlung auf Grundlage der strukturierten Informationen möglich ist.\nDie Beschreibung soll so formuliert sein, dass sie für den Anwender des Clientsystems verständlich ist.",
        "comment": "Der Beschreibungstext darf identisch zum Anzeigetext in issue.details.text sein.",
        "min": 1,
        "mustSupport": true
      },
      {
        "id": "OperationOutcome.text.status",
        "path": "OperationOutcome.text.status",
        "patternCode": "generated"
      },
      {
        "id": "OperationOutcome.text.div",
        "path": "OperationOutcome.text.div",
        "mustSupport": true
      },
      {
        "id": "OperationOutcome.issue",
        "path": "OperationOutcome.issue",
        "short": "Strukturierte Fehlerbeschreibung",
        "definition": "Diese strukturierte Fehlerbeschreibung kann zur Behandlung innerhalb des Clientsystems ausgewertet werden.",
        "mustSupport": true
      },
      {
        "id": "OperationOutcome.issue.severity",
        "path": "OperationOutcome.issue.severity",
        "short": "Schweregrad der Fehlermeldung",
        "definition": "Beschreibt die Kritikalität (den Schweregrad) der Fehlermeldung mit Bezug auf die Ausführung der gesamten Anfrage.",
        "comment": "Für VSDM-spezifische Fehlermeldungen kann der Schweregrad anhand der ConceptMap VSDMErrorcodeIssueSeverity abgeleitet werden.",
        "mustSupport": true
      },
      {
        "id": "OperationOutcome.issue.code",
        "path": "OperationOutcome.issue.code",
        "short": "Klassifizierung der Fehlermeldung",
        "definition": "Ordnet die Fehlermeldung einem standardisierten Fehlertyp zu.",
        "comment": "Für VSDM-spezifische Fehlermeldungen kann der Schweregrad anhand der ConceptMap VSDMErrorcodeIssueType abgeleitet werden.",
        "mustSupport": true
      },
      {
        "id": "OperationOutcome.issue.details",
        "path": "OperationOutcome.issue.details",
        "short": "Fehlerbeschreibung",
        "definition": "Diese Struktur beschreibt die aufgetretene Fehlersituation.",
        "min": 1
      },
      {
        "id": "OperationOutcome.issue.details.coding",
        "path": "OperationOutcome.issue.details.coding",
        "short": "Fehlercode aus den Wertetabellen gemäß Spezifikation",
        "definition": "Es sind grundsätzlich die VSDM-spezifischen Fehlercodes aus dem CodeSystem VSDMErrorcodeCS zu verwenden.\nFalls keiner der Fehlercodes fachlich zutreffend ist, kann ein allgemeiner Fehlercode aus den Standard-FHIR-CodeSystemen verwendet werden.",
        "min": 1,
        "max": "1",
        "binding": {
          "strength": "required",
          "valueSet": "https://gematik.de/fhir/vsdm2/ValueSet/VSDMErrorcodeVS"
        }
      },
      {
        "id": "OperationOutcome.issue.details.coding.system",
        "path": "OperationOutcome.issue.details.coding.system",
        "min": 1,
        "mustSupport": true
      },
      {
        "id": "OperationOutcome.issue.details.coding.code",
        "path": "OperationOutcome.issue.details.coding.code",
        "min": 1,
        "mustSupport": true
      },
      {
        "id": "OperationOutcome.issue.details.coding.display",
        "path": "OperationOutcome.issue.details.coding.display",
        "short": "Meldungstext laut Katalog",
        "definition": "Dieses Feld nimmt den unverarbeiteten Meldungstext gemäß CodeSystem/ValueSet auf."
      },
      {
        "id": "OperationOutcome.issue.details.text",
        "path": "OperationOutcome.issue.details.text",
        "short": "Aufbereiteter Meldungstext",
        "definition": "Dieses Feld nimmt den aufbereiteten Meldungstext aus dem CodeSystem/ValueSet mit ersetzten Platzhaltern auf.",
        "min": 1,
        "mustSupport": true
      },
      {
        "id": "OperationOutcome.issue.diagnostics",
        "path": "OperationOutcome.issue.diagnostics",
        "short": "Diagnostik- und Lösungsmöglichkeiten",
        "definition": "Dieses Feld liefert Hinweise zur Fehlerbehebung durch das Clientsystem in Anlehnung an Anforderung A_27014. \nDieser Text richtet sich primär an Entwickler und technische Betreuer des Clientsystems und soll dem Anwender in der Regel nicht zur Anzeige gebracht werden.",
        "comment": "Dieses Feld darf keine technischen Interna des Fachdienstes (stack traces o.ä.) enthalten.",
        "min": 1,
        "mustSupport": true
      }
    ]
  }
}
